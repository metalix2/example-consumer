describe("template spec", () => {
  beforeEach(() => {
    cy.task('log', 'start')
    cy.intercept("http://localhost:8080/products", async (req) => {
      req.url =
        "https://mxmv.pactflow.io/pacts/provider/pactflow-example-provider/consumer/pactflow-example-consumer/version/c753fb33d10cd663a6e68122982e699b70b1352b/stub/products";
      req.headers = {
        ...req.headers,
        authorization: 'Bearer 2019-01-14T11:34:18.045Z',
        cookie:
          "state=eyJ0ZW5hbnRfcmVkaXJlY3RfdXJpIjoiaHR0cHM6Ly9teG12LnBhY3RmbG93LmlvL2F1dGgvb3BlbmlkL2NhbGxiYWNrIiwibm9uY2UiOiI4RGJLZExEMHAzbXNIRFZrdkIxNmNnPT0iLCJyZXR1cm5fdG8iOm51bGx9; id_token=eyJraWQiOiIrWmRMdUozUlMzclpza3psMXNyNGpsVWM2NDA4R2JiZHFJTUJ1eTRGaTVnPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiI5YzQxMThhZi1lNmQ3LTRmYTgtODY5OC0wMDA3MGY3MWNhMGMiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLXNvdXRoZWFzdC0yLmFtYXpvbmF3cy5jb21cL2FwLXNvdXRoZWFzdC0yX3gwTDFvbFAwRCIsImNvZ25pdG86dXNlcm5hbWUiOiI5YzQxMThhZi1lNmQ3LTRmYTgtODY5OC0wMDA3MGY3MWNhMGMiLCJhdWQiOiI3dDJzNTZhcnBnNDI0a2g3b3U2MGFwY2E4bSIsImV2ZW50X2lkIjoiOGFlMmM0MmMtZTRhNC00OGQyLWI2ZjAtNTQ3ODY2NmZiY2I1IiwiY3VzdG9tOnRlbmFudF9pZHMiOiI0NzhmYTUyZDU4YjQ0MmY2ODU5MzYxYzc2MWE4NzM4YiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNjg5MTkyMDg2LCJuYW1lIjoiTWF0dGhldyBSb2JlcnRzb24iLCJleHAiOjE2ODk3NzYzODEsImlhdCI6MTY4OTc3Mjc4MSwiZW1haWwiOiJtY3JvYmVydHNvbkBwcm90b25tYWlsLmNvbSJ9.tXLrHuo2mdmIerHgrlHlgn2VkqQMmNulPG_c6MGPwbisnhUUbwlP0GplcrQ8cxra4FWSToB0CPFoGZ1MjFI_6_mlwVhPd7OD7n4aTyzaveTwzqfiMLW2yG5lWzD2izprpEjCV8d50rXX5RbjfFdeM_QcxyEVVQJrHZbmPrzYQiBIsLGtl7APiK_xhwaHpg9_9lPH9YIL4R79LRlapxXkLmD3f3gW2qJlXKITcLVdrdrrjkeD59n-e3AhYNDcO-chBwUPW8iuQxYPj2gbOplp2xTuARC6TSvk4ihubD3dqH36JUcWhmNt92K8zD3BtbumI5fE-beU_ev-4EC60-ToDw; access_token=eyJraWQiOiJjTVNNSEdaYnlZZEJWMUN4dVBxc2k1aWVaTGNmdEVuQ3owNFZOOEVET2prPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiI5YzQxMThhZi1lNmQ3LTRmYTgtODY5OC0wMDA3MGY3MWNhMGMiLCJldmVudF9pZCI6IjhhZTJjNDJjLWU0YTQtNDhkMi1iNmYwLTU0Nzg2NjZmYmNiNSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE2ODkxOTIwODYsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC5hcC1zb3V0aGVhc3QtMi5hbWF6b25hd3MuY29tXC9hcC1zb3V0aGVhc3QtMl94MEwxb2xQMEQiLCJleHAiOjE2ODk3NzYzODEsImlhdCI6MTY4OTc3Mjc4MSwianRpIjoiNWNjNDA0ZGEtYWVkOC00YTMzLWEyOTktYzYxMmFiZjk1NjZmIiwiY2xpZW50X2lkIjoiN3QyczU2YXJwZzQyNGtoN291NjBhcGNhOG0iLCJ1c2VybmFtZSI6IjljNDExOGFmLWU2ZDctNGZhOC04Njk4LTAwMDcwZjcxY2EwYyJ9.XXUKPJAORqb2S9RqH7OFwxbIuteD2fEHHiDzNKmEG9MFeEgFvxuX3M_A5EZoafZmes889sq1gCHlt60sih3uIG87oD3Quj97lwHESgrVBlzjUXsVpvABPW4gwYNkSCBGSHepKS81QkRWe2CMEKS4rEeMqJkhHsCf_ePIWlhrvkXNDGLWZyXt27GgNAX9g4QqynqyrmhfWrwE9BbiZwo25pHC-vqlSxgEhwANtgmWo-Oyc4bs6NgpEkACFb3XlJbIfmMFgSC6lwiAEr5MZ5Dp1XFAI1J55EEtAYqG0QWeSTB9XeDdgje52n4v_BvDaedTF7W_-VwBV_JltAdVfWk5Fg; refresh_token=eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.PUU77zIrs1CuU_ochsRUNYZfeXc_3stekDZeC_Qyuc5nrRCtXhALwL8ShEb8P7uPeVIxp-V6d4yVInJG1CQiVYC9834TjqCs4dRt_yQ8lk2zBtVtd90hfiG-cVLOh1T0p2zfk2SuinIzklJZ3Xp667VVq1vfAu-xuc-5pMAtz7lmy9bgH0z2CD9uUaGinAaJ902ywh8zZflahO6rySbrxwThqlpSHIp7jyCOmxMZ6xI5_Zvf-MoitoEMgaK5DBIHkUqrSDbbVh-pryEIynyEy9cFf5TcuDd-ZHp_0Xd7IMB2YaEYHroL45YIlq6CylY1sZskzPTyqieIpKmeLqir1g.ViwdvkZq38eJ_2JW.75yq4LyKcfMUJ6PCTq0P7ZpSdHmzdTTU7kLkXWHzyX3WmmHcPCTzKY5cykxgomHJTlrRXZQH1ui37yHrPusrYQZmwFyeTCH6IK4KV9HeubcTcZ88es8R0fPXg4K4HjLCMAimATf14bKlv5Lq0jADVnVbO10YQ9HFzOYZ6IQBUMqRmeVZoks3bTpuyH49H4kCBr2oocWzmwzqrN1fOqRcKa_yZUoy6G9ulu7V3tPd8hhgW1ELaSu85jZScoYRqKNQ01dfu_WAdU_1xKWBKT6ayC9GC_vNP0us-WfKx6lHXvLEBv1VR7RpYVQKE-CLfBDFZ_r_PysdjxBfIENZ8qJY1KfzsM3xfyNQohoSr4Uae_ASKy8XiwxkQGKW9U3v30D3HCBhKBGDoKLJktzhIil5zEG9aY60tans2cOi72DoAOdBK7JvUGxMq1fQByzlBs6zOdEr5Jd1ZIBnofOkGfqpjsL2zTjujUfaFj4v__B8bBXu20qluJWFoJMJHC8ymNe_CoNCYYIMBC87joJik-tZTJ4aeR8ogeBKyLfEyLRuwgZzCsK1xWrdDPfjXL_uem4j8WDcjizX8KTTEvjxuEJmJeXndJ7P22nncoMf3J6l-g_eZHqShuv1I0s7BQnkoCVqdGUhj57g9cF6OXDwMdTPVKWGAY4ur1TnRRkXwKl_PpQLgyrz9-ykkDobat-p5qGyiBzy5SdEeES-UmIIWnKpoGAF_VVxfvauq8UtU04E9KpssFXZzHW1AR6lpSWxsvB12Dr1QII-_a6PKCIjpGiGHIkAw8ySGjfFdBwoVQWKEO9McCVrs9lQe5y-mbZ1QW8L8DBzmgbIigM6FXOhwcNHFRwEQHBlW8x8TByEaKhYBZPecDYKh1Fuh1L9P4wkY0Ief4973CocyeOgejPoRf-Y4JY0gMz8f6SXnOG6R9EPShLXywIJ9jLJodM_FVU8SDraon7dA8FUy-KXen6zvQ_gV-uEBXOaX5CR7b3EQHiPWJTtMyVxxTUL5raOdxpgqXdWjTZIkayEpWLBWSQ2LG1IXjrGR4HXMnlJxdZ6rODNMRVWTAwqVbZvwEf9lkn7YVKv-pTgdVCgr9s-S-4KKCBPIJfUYf2NQgVaWpmTzGeP1GggGvG9tJKjrKOznrqtg25PkqOv_Cr15bkgSz6gYps1JO5u1lIvPxw1T_FImOOPHoeS-JueGfbuYr9GMNyvaD8UZhwp_7p0zo9KixzhpO2D3kakcsKbvkZPFKvGBY1PKYVrELke6APCKhT_kJdVS4JSCf8A8Kn93XkCWGZS18zQFDEcpK9YbjVLuczqUnwjVnLD8NKAxizi081v8t4AmYa1tNH7P702vOGwuA.vgjJGzDwIK845s2dk3wEcQ",
      };
      console.log(req);
      
      req.continue((res) => {
        console.log(res);
        if (res.body.status === "failed") {
          // sends a fixture body instead of the existing 'res.body'
          res.send({ fixture: "success.json" });
        }
      });
    }).as("products");
  });
  it("passes", () => {
    cy.visit("http://localhost:3000");
    cy.wait("@products");
  });
});
